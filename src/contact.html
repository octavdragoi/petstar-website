<!DOCTYPE html>
<html lang="en">
<head>
    <title>Contact Us - PetStar</title>
    <meta name="description" content="Get in touch with PetStar - Romania's leading PET preform manufacturer and recycling facility. Visit us in Slobozia, Ialomița.">

<!--#include virtual="assets/components/head-common.html" -->
</head>
<body style="opacity: 0; transition: opacity 0.3s ease-in;">
<!--#include virtual="assets/components/body-start.html" -->

<!--#include virtual="sections/section-01-header.html" -->

    <!-- Page Header -->
    <section class="tj-page-header" data-bg-image="assets/images/petstar-processed/contact-header.avif">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="tj-page-header-content text-center">
                        <h1 class="tj-page-title text-anim">{{t contact.heading}}</h1>
                        <div class="tj-page-link wow fadeInUp" data-wow-delay="0.1s">
                            <span>
                                <a href="index.html">
                                    <span>Home</span>
                                </a>
                            </span>
                            <span>/</span>
                            <span>
                                <span>Contact</span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Information Section -->
    <section class="tj-contact-area section-space">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="sec-heading text-center">
                        <span class="sub-title wow fadeInUp" data-wow-delay="0.1s">{{t contact.subtitle}}</span>
                        <h2 class="sec-title text-anim">{{t contact.info_heading}}</h2>
                    </div>
                </div>
            </div>
            <div class="row rg-30">
                <div class="col-xl-3 col-lg-6 col-sm-6">
                    <div class="contact-item style-2 wow fadeInUp" data-wow-delay="0.1s">
                        <div class="contact-icon">
                            <i class="tji-email"></i>
                        </div>
                        <h3 class="contact-title">{{t contact.email_title}}</h3>
                        <ul class="contact-list">
                            <li><a href="mailto:office@petstar.ro">office@petstar.ro</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-6 col-sm-6">
                    <div class="contact-item style-2 wow fadeInUp" data-wow-delay="0.3s">
                        <div class="contact-icon">
                            <i class="tji-phone"></i>
                        </div>
                        <h3 class="contact-title">{{t contact.phone_title}}</h3>
                        <ul class="contact-list">
                            <li><a href="tel:+40243232855">+40 243 232 855</a></li>
                            <li><a href="tel:+40243236553">+40 243 236 553</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-6 col-sm-6">
                    <div class="contact-item style-2 wow fadeInUp" data-wow-delay="0.5s">
                        <div class="contact-icon">
                            <i class="tji-location"></i>
                        </div>
                        <h3 class="contact-title">{{t contact.location_title}}</h3>
                        <p><strong>Headquarters</strong><br>DN 2A Km 64, 920051<br>Slobozia, Ialomița, Romania</p>
                        <p style="margin-top: 15px;"><strong>Recycling Plant</strong><br>DN 21 Slobozia-Calarasi, no 42, Romania</p>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-6 col-sm-6">
                    <div class="contact-item style-2 wow fadeInUp" data-wow-delay="0.7s">
                        <div class="contact-icon">
                            <i class="tji-clock"></i>
                        </div>
                        <h3 class="contact-title">{{t contact.hours_title}}</h3>
                        <ul class="contact-list">
                            <li>{{t contact.hours_monday_saturday}}</li>
                            <li>{{t contact.hours_time}}</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Form & Map Section -->
    <section class="tj-contact-area section-bottom-space">
        <div class="container">
            <div class="row rg-50">
                <!-- Contact Form -->
                <div class="col-lg-6">
                    <div class="contact-form-one style-2 wow fadeInUp" data-wow-delay="0.1s">
                        <h3 class="title text-anim">{{t contact.form_heading}}</h3>
                        <form action="#" id="contact-form">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-input">
                                        <input type="text" id="name" name="name" placeholder="{{t contact.form_name}}" required />
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-input">
                                        <input type="email" id="email" name="email" placeholder="{{t contact.form_email}}" required />
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-input">
                                        <input type="tel" id="phone" name="phone" placeholder="{{t contact.form_phone}}" required />
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-input">
                                        <div class="tj-nice-select-box">
                                            <div class="tj-select">
                                                <select class="nice-select" name="subject">
                                                    <option>{{t contact.form_subject_default}}</option>
                                                    <option value="preforms">{{t contact.form_subject_preforms}}</option>
                                                    <option value="recycling">{{t contact.form_subject_recycling}}</option>
                                                    <option value="partnership">{{t contact.form_subject_partnership}}</option>
                                                    <option value="general">{{t contact.form_subject_general}}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="form-input input-textarea">
                                        <textarea id="message" name="message" placeholder="{{t contact.form_message}}"></textarea>
                                    </div>
                                </div>
                                <div class="submit-button">
                                    <button type="submit" class="tj-primary-btn">
                                        <span class="btn_inner">
                                            <span class="btn_icon">
                                                <span>
                                                    <i class="tji-arrow-right"></i>
                                                    <i class="tji-arrow-right"></i>
                                                </span>
                                            </span>
                                            <span class="btn_text">
                                                <span>{{t contact.form_submit}}</span>
                                            </span>
                                        </span>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Google Map -->
                <div class="col-lg-6">
                    <div class="google-map wow fadeInUp" data-wow-delay="0.3s">
                        <iframe
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d11356.912!2d27.337863!3d44.564047!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f10!3m3!1m2!1s0x0%3A0x0!2zNDTCsDMzJzUwLjYiTiAyN8KwMjAnMzQuMyJF!5e0!3m2!1sen!2sro!4v1642025261462!5m2!1sen!2sro"
                            style="border:0;"
                            allowfullscreen=""
                            loading="lazy"
                            title="PetStar Location Map"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="tj-cta-section">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="cta-wrapper">
                        <div class="cta-title">
                            <h2 class="title text-anim">{{t contact.cta_heading}}</h2>
                        </div>
                        <div class="cta-button wow fadeInUp" data-wow-delay="0.1s">
                            <a href="https://www.facebook.com/petstarholding" target="_blank" rel="noopener noreferrer" class="tj-primary-btn white-btn">
                                <span class="btn_inner">
                                    <span class="btn_icon">
                                        <span>
                                            <i class="tji-arrow-right"></i>
                                            <i class="tji-arrow-right"></i>
                                        </span>
                                    </span>
                                    <span class="btn_text">
                                        <span>{{t contact.cta_button}}</span>
                                    </span>
                                </span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <img class="cta-shape-1" src="assets/images/shapes/cta-shapes-1.png" alt="Shapes">
        <img class="cta-shape-2" src="assets/images/shapes/cta-shapes-2.png" alt="Shapes">
    </section>

<!--#include virtual="sections/section-12-footer.html" -->

<!--#include virtual="assets/components/body-end.html" -->

    <style>
        /* Toast notification styles */
        .toast-notification {
            position: fixed;
            top: 100px;
            right: 30px;
            background: white;
            padding: 20px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 9999;
            display: flex;
            align-items: center;
            gap: 15px;
            min-width: 300px;
            max-width: 500px;
            transform: translateX(calc(100% + 50px));
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .toast-notification.show {
            transform: translateX(0);
        }

        .toast-notification.success {
            border-left: 4px solid #008080;
        }

        .toast-notification.error {
            border-left: 4px solid #dc3545;
        }

        .toast-notification.warning {
            border-left: 4px solid #ffc107;
        }

        .toast-icon {
            font-size: 24px;
            flex-shrink: 0;
        }

        .toast-notification.success .toast-icon {
            color: #008080;
        }

        .toast-notification.error .toast-icon {
            color: #dc3545;
        }

        .toast-notification.warning .toast-icon {
            color: #ffc107;
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 600;
            color: #051229;
            margin-bottom: 5px;
            font-size: 16px;
        }

        .toast-message {
            color: #364052;
            font-size: 14px;
            line-height: 1.5;
        }

        .toast-close {
            background: none;
            border: none;
            font-size: 20px;
            color: #8b92a7;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: color 0.2s;
        }

        .toast-close:hover {
            color: #051229;
        }

        @media (max-width: 768px) {
            .toast-notification {
                right: 15px;
                left: 15px;
                min-width: auto;
                max-width: none;
            }
        }
    </style>

    <script>
        // Toast notification function
        function showToast(title, message, type = 'success') {
            // Remove any existing toasts
            const existingToasts = document.querySelectorAll('.toast-notification');
            existingToasts.forEach(toast => toast.remove());

            // Create toast element
            const toast = document.createElement('div');
            toast.className = `toast-notification ${type}`;

            const icons = {
                success: '✓',
                error: '✕',
                warning: '⚠'
            };

            toast.innerHTML = `
                <div class="toast-icon">${icons[type] || icons.success}</div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close" onclick="this.parentElement.remove()">×</button>
            `;

            document.body.appendChild(toast);

            // Trigger animation
            setTimeout(() => toast.classList.add('show'), 100);

            // Auto remove after 5 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 400);
            }, 5000);
        }

        // Wait for both DOM and jQuery to be ready
        (function() {
            function initContactForm() {
                console.log('Initializing contact form...');

                // Highlight active menu item (only if jQuery is available)
                if (typeof $ !== 'undefined') {
                    $('.header-menu ul li a').each(function() {
                        if ($(this).attr('href') === 'contact.html') {
                            $(this).parent().addClass('active');
                        }
                    });
                } else {
                    console.warn('jQuery not loaded yet, skipping menu highlight');
                }

                // Handle form submission
                const form = document.getElementById('contact-form');
                if (!form) {
                    console.error('Contact form not found!');
                    return;
                }

                console.log('Contact form found, attaching handler');

                form.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    console.log('Form submitted');

                    const submitButton = this.querySelector('button[type="submit"]');
                    const buttonText = submitButton.querySelector('.btn_text span');
                    const originalText = buttonText.textContent;

                    // Disable button and show loading state
                    submitButton.disabled = true;
                    buttonText.textContent = 'Sending...';

                    // Get form data
                    const formData = {
                        name: document.getElementById('name').value,
                        email: document.getElementById('email').value,
                        phone: document.getElementById('phone').value,
                        subject: document.querySelector('select[name="subject"]').value,
                        message: document.getElementById('message').value
                    };

                    console.log('Form data:', formData);

                    try {
                        // Submit to Strapi backend
                        const response = await fetch('https://api.petstar-dash.ro/api/contact/submit', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(formData)
                        });

                        const data = await response.json();
                        console.log('Response:', data);

                        if (response.ok && data.success) {
                            // Show success message
                            showToast(
                                'Message Sent Successfully!',
                                'Thank you for contacting us. We will get back to you soon.',
                                'success'
                            );
                            // Reset form
                            form.reset();
                            // Reset nice-select dropdown
                            if (window.jQuery) {
                                $('.nice-select').find('.current').text($('select[name="subject"] option:first').text());
                            }
                        } else if (response.status === 429) {
                            // Rate limit exceeded
                            const retryAfter = data.data?.retryAfter ? Math.ceil(data.data.retryAfter / 60) : 15;
                            showToast(
                                'Too Many Requests',
                                `Please wait ${retryAfter} minutes before trying again.`,
                                'warning'
                            );
                        } else {
                            throw new Error(data.message || 'Failed to send message');
                        }
                    } catch (error) {
                        console.error('Form submission error:', error);
                        if (!error.message.includes('Too many requests')) {
                            showToast(
                                'Error Sending Message',
                                'Sorry, there was an error. Please try again or contact us at office@petstar.ro',
                                'error'
                            );
                        }
                    } finally {
                        // Re-enable button
                        submitButton.disabled = false;
                        buttonText.textContent = originalText;
                    }
                });
            }

            // Try to initialize immediately if DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initContactForm);
            } else {
                initContactForm();
            }
        })();
    </script>
</body>
</html>
